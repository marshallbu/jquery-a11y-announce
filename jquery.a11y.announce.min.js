/**
 * Unobtrusive Announce Method, formed into a more syntax correct jQuery
 * plugin.
 * Code taken from Bryan Garaventa's (WhatSock.com) of the same name, as
 * part of the AccDC library he developed.
 * 
 * Author: @marshallbu
 *
 */(function(e,t,n,r){var i=t.a11y?t.a11y:t.a11y={};i.announce=function(t){var n=this;console.log(n);var r=t||{};r.type=t.type||"polite";var s=r.message,o=r.loop,u=r.noRep,a=s;a&&a.nodeName&&a.nodeType===1&&(a=e(a).text());o||i.announce.queues[r.type].alertMsgs.push(a);if(r.type!=="polite"||i.announce.queues[r.type].alertMsgs.length!==1&&!o)i.announce.placeHolder[r.type].innerHTML=a;else{var f=i.announce.defaultOptions.baseDelay+i.announce.defaultOptions.iterate(i.announce.queues[r.type].alertMsgs[0],/\s|\,|\.|\:|\;|\!|\(|\)|\/|\?|\@|\#|\$|\%|\^|\&|\*|\\|\-|\_|\+|\=/g)*i.announce.defaultOptions.charMultiplier;if(!u||i.announce.queues[r.type].lastMsg!==i.announce.queues[r.type].alertMsgs[0]){i.announce.queues[r.type].lastMsg=i.announce.queues[r.type].alertMsgs[0];i.announce.placeHolder[r.type].innerHTML=i.announce.queues[r.type].alertMsgs[0]}i.announce.alertTimeOut=setTimeout(function(){i.announce.placeHolder[r.type].innerHTML="";i.announce.queues[r.type].alertMsgs.shift();i.announce.queues[r.type].alertMsgs.length>=1&&i.announce({message:i.announce.queues[r.type].alertMsgs[0],loop:!0,type:r.type})},f)}return s};i.announce.queues={polite:{alertMsgs:[],lastMsg:""},assertive:{alertMsgs:[],lastMsg:""}};i.announce.defaultOptions={baseDelay:5e3,charMultiplier:10,iterate:function(e,t){var n=0;e.replace(t,function(){n++});return n}};e(function(){i.announce.placeHolder=i.announce.placeHolder||{};i.announce.placeHolder.polite=function(){var t=i.announce.placeHolder.polite;if(typeof t=="undefined"){t=e("<span></span>").attr({role:"region","aria-live":"polite","aria-atomic":"false"}).css({position:"absolute",clip:"rect(1px, 1px, 1px, 1px)",padding:0,border:0,height:"1px",width:"1px",overflow:"hidden",zIndex:-1e3}).get(0);e("body").append(t);return t}return t}();i.announce.placeHolder.assertive=function(){var t=i.announce.placeHolder.assertive;if(typeof t=="undefined"){t=e("<span></span>").attr({role:"alert","aria-live":"assertive","aria-atomic":"false"}).css({position:"absolute",clip:"rect(1px, 1px, 1px, 1px)",padding:0,border:0,height:"1px",width:"1px",overflow:"hidden",zIndex:-1e3}).get(0);e("body").append(t);return t}return t}()})})(jQuery,window,document);